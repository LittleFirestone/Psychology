<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Healing Diary</title>

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-slate-50 text-slate-800">
    <div id="root" class="p-6">Loading…</div>

    <!-- React 18 (UMD) + ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel (so we can write JSX inline) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Your app (keep type=text/babel so JSX compiles in the browser) -->
    <script type="text/babel">
      // If something throws, show the error on the page so it’s never blank.
      const showError = (err) => {
        const el = document.getElementById('root');
        el.className = 'p-6 text-red-600 whitespace-pre-wrap';
        el.textContent = 'App failed to load:\\n\\n' + (err?.stack || err);
      };

      try {
        function App() {
          const [count, setCount] = React.useState(0);
          return (
            <main className="max-w-3xl mx-auto space-y-6">
              <h1 className="text-3xl font-bold">Healing Diary — Smoke Test</h1>
              <p>If you can see this, React & Babel loaded correctly.</p>
              <button
                className="px-4 py-2 rounded-lg bg-blue-600 text-white"
                onClick={() => setCount((c) => c + 1)}
              >
                Clicks: {count}
              </button>
              <p className="text-sm text-slate-500">Once this renders, we’ll paste the full app back in.</p>
            </main>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
      } catch (err) {
        showError(err);
      }

      // Also catch async/module-time errors
      window.addEventListener('error', (e) => showError(e.error || e.message));
      window.addEventListener('unhandledrejection', (e) => showError(e.reason || e));
    </script>
  </body>
</html>
